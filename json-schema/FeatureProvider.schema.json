{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://vizztools.github.io/vizzToolsCore/json-schema/FeatureProvider.schema.json",
    "title": "FeatureProvider",
    "description": "A vizzToolsCore FeatureProvider definition object that describes the connection of the dataset data.",
    "definitions": {
        "CSV": {
            "$ref": "DataProvider.schema.json",
            "title": "CSV",
            "description": "CSV featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field"
            ],
            "properties": {
                "type": {
                    "const": "feature"
                },
                "name": {
                    "const": "CSV"
                },
                "table": {
                    "const": "null"
                },
                "options": {
                    "const": "null"
                },
                "format": {
                    "const": "null"
                },
                "zoom": {
                    "const": "null"
                },
                "schemes": {
                    "const": "null"
                }
            }
        },
        "GeoJSON": {
            "$ref": "DataProvider.schema.json",
            "title": "GeoJSON",
            "description": "GeoJSON featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field"
            ],
            "properties": {
                "type": {
                    "const": "feature"
                },
                "name": {
                    "const": "CSV"
                },
                "table": {
                    "const": "null"
                },
                "options": {
                    "const": "null"
                },
                "format": {
                    "const": "null"
                },
                "zoom": {
                    "const": "null"
                },
                "schemes": {
                    "const": "null"
                }
            }
        },
        "Elasticsearch": {
            "$ref": "DataProvider.schema.json",
            "title": "Elasticsearch",
            "description": "Elasticsearch featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field",
                "time_field"
            ],
            "properties": {
                "type": {
                    "const": "feature"
                },
                "name": {
                    "const": "Elasticsearch"
                },
                "table": {
                    "const": "null"
                },
                "options": {
                    "const": "null"
                },
                "format": {
                    "const": "null"
                },
                "zoom": {
                    "const": "null"
                },
                "schemes": {
                    "const": "null"
                }
            }
        },
        "SQLiteGPKG": {
            "$ref": "DataProvider.schema.json",
            "title": "SQLiteGPKG",
            "description": "SQLiteGPKG featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field",
                "table"
            ],
            "properties": {
                "type": {
                    "const": "feature"
                },
                "name": {
                    "const": "SQLiteGPKG"
                },
                "options": {
                    "const": "null"
                },
                "format": {
                    "const": "null"
                },
                "zoom": {
                    "const": "null"
                },
                "schemes": {
                    "const": "null"
                }
            }
        },
        "PostgreSQL": {
            "$ref": "DataProvider.schema.json",
            "title": "PostgreSQL",
            "description": "PostgreSQL featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field",
                "table",
                "geom_field"
            ],
            "properties": {
                "type": {
                    "const": "feature"
                },
                "name": {
                    "const": "PostgreSQL"
                },
                "data": {
                    "$ref": "DataProvider.schema.json#definitions/database_data"
                },
                "options": {
                    "const": "null"
                },
                "format": {
                    "const": "null"
                },
                "zoom": {
                    "const": "null"
                },
                "schemes": {
                    "const": "null"
                }
            }
        }
    },
    "anyOf": [
        {
            "$ref": "#/definitions/CSV"
        },
        {
            "$ref": "#/definitions/GeoJSON"
        },
        {
            "$ref": "#/definitions/Elasticsearch"
        },
        {
            "$ref": "#/definitions/SQLiteGPKG"
        },
        {
            "$ref": "#/definitions/PostgreSQL"
        }
    ],
    "examples": [{
        "type": "feature",
        "name": "CSV",
        "data": "tests/data/obs.csv",
        "id_field": "id",
        "geometry": {
            "x_field": "long",
            "y_field": "lat"
        }
    },
    {
        "type": "feature",
        "name": "GeoJSON",
        "data": "tests/data/obs.json",
        "id_field": "id"
    },
    {
        "type": "feature",
        "name": "Elasticsearch",
        "data": "http://localhost:9200/ne_110m_populated_places_simple",
        "id_field": "id",
        "time_field": "datetimefield"
    },
    {
        "type": "feature",
        "name": "PostgreSQL",
        "data": {
            "host": "127.0.0.1",
            "dbname": "test",
            "user": "postgres",
            "password": "postgres",
            "search_path": [
                "osm",
                "public"
            ]
        },
        "id_field": "osm_id",
        "table": "hotosm_bdi_waterways",
        "geom_field": "foo_geom"
    }]
}