{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://vizztools.github.io/vizzToolsCore/json-schema/FeatureProvider.schema.json",
    "title": "FeatureProvider",
    "description": "A vizzToolsCore FeatureProvider definition object that describes the connection of the dataset data.",
    "definitions": {
        "CSV": {
            "type": "object",
            "title": "CSV",
            "description": "CSV featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field"
            ],
            "properties": {
                "type": {
                    "$ref": "DataProvider.schema.json#/definitions/type",
                    "const": "feature"
                },
                "name": {
                    "$ref": "DataProvider.schema.json#/definitions/name",
                    "const": "CSV"
                },
                "data": {
                    "$ref": "DataProvider.schema.json#/definitions/data"
                },
                "id_field": {
                    "$ref": "DataProvider.schema.json#/definitions/id_field"
                }
            }
        },
        "GeoJSON": {
            "type": "object",
            "title": "GeoJSON",
            "description": "GeoJSON FeatureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field"
            ],
            "properties": {
                "type": {
                    "$ref": "DataProvider.schema.json#/definitions/type",
                    "const": "feature"
                },
                "name": {
                    "$ref": "DataProvider.schema.json#/definitions/name",
                    "const": "CSV"
                },
                "data": {
                    "$ref": "DataProvider.schema.json#/definitions/data"
                },
                "id_field": {
                    "$ref": "DataProvider.schema.json#/definitions/id_field"
                }
            }
        },
        "Elasticsearch": {
            "type": "object",
            "title": "Elasticsearch",
            "description": "Elasticsearch FeatureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field",
                "time_field"
            ],
            "properties": {
                "type": {
                    "$ref": "DataProvider.schema.json#/definitions/type",
                    "const": "feature"
                },
                "name": {
                    "$ref": "DataProvider.schema.json#/definitions/name",
                    "const": "Elasticsearch"
                },
                "data": {
                    "$ref": "DataProvider.schema.json#/definitions/data"
                },
                "id_field": {
                    "$ref": "DataProvider.schema.json#/definitions/id_field"
                },
                "time_field": {
                    "$ref": "DataProvider.schema.json#/definitions/time_field"
                }
            }
        },
        "SQLiteGPKG": {
            "type": "object",
            "title": "SQLiteGPKG",
            "description": "SQLiteGPKG featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field",
                "table"
            ],
            "properties": {
                "type": {
                    "$ref": "DataProvider.schema.json#/definitions/type",
                    "const": "feature"
                },
                "name": {
                    "$ref": "DataProvider.schema.json#/definitions/name",
                    "const": "SQLiteGPKG"
                },
                "data": {
                    "$ref": "DataProvider.schema.json#/definitions/data"
                },
                "id_field": {
                    "$ref": "DataProvider.schema.json#/definitions/id_field"
                },
                "table": {
                    "$ref": "DataProvider.schema.json#/definitions/table"
                }
            }
        },
        "PostgreSQL": {
            "type": "object",
            "title": "PostgreSQL",
            "description": "PostgreSQL featureProvider",
            "required": [
                "type",
                "name",
                "data",
                "id_field",
                "table",
                "geom_field"
            ],
            "properties": {
                "type": {
                    "$ref": "DataProvider.schema.json#/definitions/type",
                    "const": "feature"
                },
                "name": {
                    "$ref": "DataProvider.schema.json#/definitions/name",
                    "const": "PostgreSQL"
                },
                "data": {
                    "$ref": "DataProvider.schema.json#/definitions/DatabaseData"
                },
                "id_field": {
                    "$ref": "DataProvider.schema.json#/definitions/id_field"
                },
                "table": {
                    "$ref": "DataProvider.schema.json#/definitions/table"
                },
                "geom_field": {
                    "$ref": "DataProvider.schema.json#/definitions/geom_field"
                }
            }
        }
    },
    "anyOf": [
        {
            "$ref": "#/definitions/CSV"
        },
        {
            "$ref": "#/definitions/GeoJSON"
        },
        {
            "$ref": "#/definitions/Elasticsearch"
        },
        {
            "$ref": "#/definitions/SQLiteGPKG"
        },
        {
            "$ref": "#/definitions/PostgreSQL"
        }
    ],
    "examples": [
        {
            "type": "feature",
            "name": "CSV",
            "data": "tests/data/obs.csv",
            "id_field": "id",
            "geometry": {
                "x_field": "long",
                "y_field": "lat"
            }
        },
        {
            "type": "feature",
            "name": "GeoJSON",
            "data": "tests/data/obs.json",
            "id_field": "id"
        },
        {
            "type": "feature",
            "name": "Elasticsearch",
            "data": "http://localhost:9200/ne_110m_populated_places_simple",
            "id_field": "id",
            "time_field": "datetimefield"
        },
        {
            "type": "feature",
            "name": "PostgreSQL",
            "data": {
                "host": "127.0.0.1",
                "dbname": "test",
                "user": "postgres",
                "password": "postgres",
                "search_path": [
                    "osm",
                    "public"
                ]
            },
            "id_field": "osm_id",
            "table": "hotosm_bdi_waterways",
            "geom_field": "foo_geom"
        }
    ]
}